(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([[228],{2198:function(e,t,n){"use strict";n.d(t,"t",function(){return c});var r=n(0),i=n(91),s=n(7),o=n(1121),u=n(181),a=n(1272),f=n(19),l=(function(e){Object(r.__extends)(t,e);function t(t,n){void 0===n&&(n={});var r=e.call(this,t,n)||this;r._getModule=t.getModule;r._path=t.path;r._getExecutorParams=t.getExecutorParams;if(f.e.isActivated("9DB5106C-820A-4714-B0C1-1005523DFE8F","07/09/2021","Removes usage of BundeLoader from ExecutorAction to solve race conditions in BundleQueue")){r._bundleLoader=r.resources.consume(u.e);r._bundleLoader.queueLoad(r._path,r._getModule).done()}return r}t.prototype.execute=function(e,t){var n=this;return this._path?this._loadExecutorType().then(function(r){return"function"!=typeof r?i.n.wrapError(new Error("Cannot create action from ".concat(r,": ").concat(n._path))):i.n.as(n._getExecutorParams()).then(function(s){var o=new(n.resources.injected(r))(s);return i.n.as(o.execute(e,t))})}):i.n.wrapError(new Error("Cannot create action from nothing: ".concat(this._path)))};t.prototype._loadExecutorType=function(){if(f.e.isActivated("9DB5106C-820A-4714-B0C1-1005523DFE8F","07/09/2021","Removes usage of BundeLoader from ExecutorAction to solve race conditions in BundleQueue")){var e=this._bundleLoader.loadNow(this._path,this._getModule);this._loadExecutorType=function(){return e};return e}return this._getModule().then(function(e){return Object(a.e)(e)})};t.dependencies=Object(r.__assign)({},o.default.dependencies);return t})(o.default);t.e=l;var c=new s.t({name:"ExecutorLoader",factory:{dependencies:l.dependencies,create:function(e){return{instance:(function(t){Object(r.__extends)(n,t);function n(n){return t.call(this,n,e)||this}return n})(l)}}}})},2689:function(e,t,n){"use strict";n.d(t,"e",function(){return f});var r=n(0),i=n("knockout-lib"),s=(function(e){Object(r.__extends)(t,e);function t(t){var n=e.call(this,t)||this;n.memoryContent=i.observable(null);n.serverContent=i.observable(null);n.outDated=i.observable(!1);n.isEditable=i.observable(!1);n.hasConflict=n.createPureComputed(n._computeHasConflict);n.hasPendingSave=n.createPureComputed(n._computeHasPendingSave);n.hasChanges=n.createPureComputed(n._computeHasChanges);n._lastSaved=i.observable(null);n._pendingSave=i.observable(null);return n}t.prototype.startingSave=function(){this.hasPendingSave.peek()||this._pendingSave(this.memoryContent.peek().text)};t.prototype.saveFailed=function(){this.hasPendingSave.peek()&&this._pendingSave(null)};t.prototype.saveSucceded=function(){if(this.hasPendingSave.peek()){this.updateETag=!0;this._lastSaved(this._pendingSave.peek());this._pendingSave(null)}};t.prototype._computeHasPendingSave=function(){return!!this._pendingSave()};t.prototype._computeHasChanges=function(){var e=this.memoryContent();if(!e||"string"!=typeof e.text)return!1;var t=this._lastSaved();if(null===t){this._lastSaved(e.text);return!1}return e.text!==t};t.prototype._computeHasConflict=function(){return!!this.serverContent()};return t})(n(1121).default),o=n(640),u=n(119),a=(function(){function e(e,t){this._itemContents={}}e.prototype.getItemContent=function(e){var t=e.key,n=this._itemContents,r=n[t];if(!r){r=new s;Object(o.e)(r,function(){delete n[t]});n[t]=r}return r};e.prototype.dispose=function(){this._itemContents={}};return e})(),f=Object(u.s)("ItemContentProvider",a,{})},3628:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(91),s=n(2052),o=n(2198),u=n(2060),a=n(171),f=n(2689),l=n(4),c=(function(e){Object(r.__extends)(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.getExecutorPath=function(){return"./SaveExecutor"};t.prototype.getModuleFactory=function(){return function(){return i.n.resolve(n.ee([229,"deferred"],5444))}};return t})((function(e){Object(r.__extends)(t,e);function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;n.name="Save";n._itemContentsProvider=n.resources.consume(f.e);n._selectionHelper=new(n.child(u.e))({overrideItem:t.item,allowMultiSelect:!1,canFallback:!1});var r=Object(l.ks)(l.K)?n._selectionHelper.currentItem:n.resources.consume(a.o);n._loader=new(n.managed(o.e))({path:n.getExecutorPath(),getModule:n.getModuleFactory(),getExecutorParams:function(){return{selectionHelper:n._selectionHelper,currentItem:r.peek()}}});return n}t.prototype.onIsAvailable=function(){var e=this._selectionHelper.firstItem();if(!e)return!1;var t=this._itemContentsProvider.getItemContent(e);return!!t.isEditable()&&(!!t.memoryContent()&&(!t.hasConflict()&&(!t.hasPendingSave()&&t.hasChanges())))};t.prototype.onExecute=function(e){return this._loader.execute(e)};return t})(s.e));t.default=c}}]);